<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ПроЗахист - Категорії</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4; }
.container { width:90%; max-width:1200px; margin:auto; padding:20px; }
h1 { text-align:center; margin-bottom:30px; }

.categories, .products { display:flex; flex-wrap: wrap; justify-content: center; gap:20px; }
.category, .product { width:200px; border:1px solid #ddd; border-radius:8px; overflow:hidden; text-align:center; background:#fff; transition: transform 0.3s; }
.category:hover, .product:hover { transform: scale(1.05); }
.category img, .product img { width:100%; height:150px; object-fit:cover; }
.category-name, .product-name { padding:10px; font-weight:bold; }
.product-price { padding-bottom:10px; color:#4CAF50; font-weight:bold; }
.add-btn { padding:8px 10px; margin-bottom:10px; background:#4CAF50; color:#fff; border:none; border-radius:5px; cursor:pointer; }
.add-btn:hover { background:#45a049; }

.back-btn { margin:20px auto; display:block; padding:10px 20px; background:#4CAF50; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:1em; }
.back-btn:hover { background:#45a049; }

.hidden { display:none; }

/* Тост */
.toast-overlay {
  position: fixed;
  top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.4);
  display:flex;
  justify-content: center;
  align-items: center;
  opacity:0;
  visibility:hidden;
  transition: opacity 0.4s ease, visibility 0.4s ease;
  z-index:10000;
}
.toast-overlay.show { opacity:1; visibility:visible; }
.toast-message {
  background:#4CAF50;
  color:#fff;
  padding:20px 40px;
  border-radius:8px;
  font-size:1.2em;
  text-align:center;
  font-weight:bold;
}
</style>
</head>
<body>

<div class="container">
    <h1>ПроЗахист</h1>

    <!-- Категории -->
    <div class="categories" id="categories">
        <div class="category" data-category="internal">
            <img src="images/internal.jpg" alt="Внутрішні камери">
            <div class="category-name">Внутрішні камери</div>
        </div>
        <div class="category" data-category="external">
            <img src="images/external.jpg" alt="Зовнішні камери">
            <div class="category-name">Зовнішні камери</div>
        </div>
        <div class="category" data-category="alarm">
            <img src="images/alarm.jpg" alt="Охоронна сигналізація">
            <div class="category-name">Охоронна сигналізація</div>
        </div>
    </div>

    <!-- Товары -->
    <div class="products hidden" id="products"></div>

    <button class="back-btn hidden" id="backBtn">Назад до категорій</button>
</div>

<!-- Тост -->
<div class="toast-overlay" id="toast">
  <div class="toast-message" id="toastMessage">Товар додано до кошика!</div>
</div>

<script>
const productData = {
    internal: [
        {name: "Камера внутрішня 1", price: 2500, img:"images/internal1.jpg"},
        {name: "Камера внутрішня 2", price: 3000, img:"images/internal2.jpg"}
    ],
    external: [
        {name: "Камера зовнішня 1", price: 4000, img:"images/external1.jpg"},
        {name: "Камера зовнішня 2", price: 4500, img:"images/external2.jpg"}
    ],
    alarm: [
        {name: "Сигналізація 1", price: 3500, img:"images/alarm1.jpg"},
        {name: "Сигналізація 2", price: 3800, img:"images/alarm2.jpg"}
    ]
};

const categories = document.getElementById("categories");
const products = document.getElementById("products");
const backBtn = document.getElementById("backBtn");
const toast = document.getElementById("toast");

document.querySelectorAll(".category").forEach(cat => {
    cat.addEventListener("click", () => {
        const catKey = cat.dataset.category;
        showProducts(catKey);
    });
});

function showProducts(category) {
    products.innerHTML = "";
    productData[category].forEach(item => {
        const div = document.createElement("div");
        div.classList.add("product");
        div.innerHTML = `
            <img src="${item.img}" alt="${item.name}">
            <div class="product-name">${item.name}</div>
            <div class="product-price">${item.price} грн</div>
            <button class="add-btn">Додати в кошик</button>
        `;
        // Добавление в корзину
        div.querySelector(".add-btn").addEventListener("click", () => {
            addToCart(item);
        });
        products.appendChild(div);
    });
    categories.classList.add("hidden");
    products.classList.remove("hidden");
    backBtn.classList.remove("hidden");
}

backBtn.addEventListener("click", () => {
    products.classList.add("hidden");
    backBtn.classList.add("hidden");
    categories.classList.remove("hidden");
});

function addToCart(item) {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    // Если товар уже есть, увеличиваем количество
    const existing = cart.find(p => p.name === item.name);
    if(existing) existing.quantity++;
    else cart.push({...item, quantity:1});
    localStorage.setItem("cart", JSON.stringify(cart));
    showToast("Товар додано до кошика!");
}

function showToast(message) {
    document.getElementById("toastMessage").textContent = message;
    toast.classList.add("show");
    setTimeout(()=>{ toast.classList.remove("show"); }, 2000);
}
</script>

</body>
</html>
